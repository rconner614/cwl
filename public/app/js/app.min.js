function config(e,t,o,r){t.otherwise("/"),e.state("login",{url:"/login",templateUrl:"/app/views/_login.html",controller:"loginCtrl",resolve:{tab:[function(){return 1}]}}).state("documents",{url:"/members/documents",templateUrl:"/app/views/_documents.html",controller:"documentsCtrl",resolve:{docs:["documentSrv",function(e){return e.getDocuments()}]}}).state("admin",{url:"/admin",templateUrl:"/app/views/_admin.html",controller:"adminCtrl",resolve:{docs:["documentSrv",function(e){return e.getDocuments()}]}}).state("home",{url:"/",templateUrl:"/app/views/_home.html",controller:"homeCtrl"}).state("contact",{url:"/contact",templateUrl:"/app/views/_contact.html"}).state("about",{url:"/about",templateUrl:"/app/views/_about.html"}).state("faqs",{url:"/faqs",templateUrl:"/app/views/_faqs.html"}).state("maps",{url:"/map",templateUrl:"/app/views/_maps.html"}).state("lake",{url:"/explore/lake",templateUrl:"/app/views/_exploreLake.html"}).state("pool",{url:"/explore/pools",templateUrl:"/app/views/_explorePools.html"}).state("beach",{url:"/explore/beach",templateUrl:"/app/views/_exploreBeach.html"}).state("activities",{url:"/explore/activities",templateUrl:"/app/views/_exploreActivities.html"}).state("community",{url:"/explore/community",templateUrl:"/app/views/_exploreCommunity.html"}).state("amenities",{url:"/explore/amenities",templateUrl:"/app/views/_exploreAmenities.html"}).state("nearby",{url:"/explore/nearby",templateUrl:"/app/views/_exploreNearby.html"}).state("clubs",{url:"/explore/clubs",templateUrl:"/app/views/_exploreClubs.html"}).state("fourth",{url:"/events/july-fourth",templateUrl:"/app/views/_eventsFourth.html"}).state("ongoing",{url:"/events/ongoing",templateUrl:"/app/views/_eventsOnGoing.html"}).state("reinfo",{url:"/real-estate/information",templateUrl:"/app/views/_realEstateInformation.html"}).state("reForSale",{url:"/real-estate/for-sale",templateUrl:"/app/views/_realEstateForSale.html",controller:["$scope",function(e){e.tab=2}]}),o.html5Mode(!0)}var app=angular.module("cwl.core",["ui.router","ui.bootstrap","ngAside","angularFileUpload","ngCookies"]);app.run(["$rootScope",function(e){e.today=new Date}]),app.config(config),config.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider"],function(){"use strict";function e(e,o,r,n,s){function l(){const r=o.defer();return e.get("/account/user").then(function(e){if(200===e.status&&e.data)return t=e.data,r.resolve(e);a(),r.resolve()}),r.promise}function i(){const t=o.defer();return e.get("/user").then(function(e){200===e.status?t.resolve(e.data):t.reject(e)},function(e){t.reject(e)}),t.promise}function u(t){const r=o.defer();return e.put("/user",{user:t}).then(function(e){200===e.status?r.resolve(e.data):r.reject(e)},function(e){r.reject(e)}),r.promise}function c(t){const r=o.defer();return e.delete("/user/"+t._id).then(function(e){200===e.status?r.resolve(e):r.reject(e)},function(e){r.reject(e)}),r.promise}function a(){console.log("logout"),n.remove("t"),t=null,s.path("/login")}function d(s){var l=o.defer();return e.post("/account/login",s).then(function(e){200===e.status?(t=e.data.user,n.put("t",t.token),r.$broadcast("auth"),l.resolve(e.data)):(console.log(e),l.reject(e))},function(e){l.reject(e),console.log(e)}),l.promise}function m(t){var r=o.defer();return e.post("/account/user",{user:t}).then(function(e){200===e.status?r.resolve(e.data.user):(console.log(e),r.reject(e))},function(e){r.reject(e),console.log(e)}),r.promise}return{login:d,register:m,fillCurrentUser:l,logout:a,getUsers:i,updateUser:u,deleteUser:c,user:function(){return t?{firstName:t.firstName,lastName:t.lastName,email:t.email,isAdmin:t.isAdmin,isActive:t.isActive}:null}}}var t=null;angular.module("cwl.core").factory("authSrv",e),e.$inject=["$http","$q","$rootScope","$cookies","$location"],$(function(){var e=document.cookie.replace(/(?:(?:^|.*;\s*)t\s*\=\s*([^;]*).*$)|^.*$/,"$1");$.ajax({url:"/account/user",headers:{"x-session-token":e},success:function(e){t=e,angular.bootstrap($("html")[0],["cwl.core"])},error:function(e){angular.bootstrap($("html")[0],["cwl.core"])}})})}(),function(){"use strict";function e(e,t){function o(){var o=t.defer();return e.get("/doc").then(function(e){200===e.status?o.resolve(e.data):o.reject(e)},function(e){o.reject(e)}),o.promise}function r(o){var r=t.defer();return e.get("/doc/"+o).then(function(e){200===e.status?r.resolve(e.data):r.reject(e)},function(e){r.reject(e)}),r.promise}function n(o){var r=t.defer();return e.put("/doc/",o).then(function(e){200===e.status?r.resolve(e.data):r.reject(e)},function(e){r.reject(e)}),r.promise}function s(o){var r=t.defer();return e.delete("/doc/"+o._id).then(function(e){200===e.status?r.resolve(e):r.reject(e)},function(e){r.reject(e)}),r.promise}return{getDocuments:o,getDoc:r,updateDoc:n,deleteDocument:s,types:[{type:"policies",name:"Policies"},{type:"non-permits",name:"Non ECC Permits"},{type:"minutes",name:"Minutes"},{type:"ecc-permits",name:"ECC Permits"},{type:"agenda",name:"Agenda"},{type:"other",name:"Other"}]}}angular.module("cwl.core").factory("documentSrv",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,o,r,n,s){t.user()||r.path("/login"),e.user=t.user(),e.editUser=null,e.documents=n,t.getUsers().then(function(t){t&&t.length&&(e.users=t)}),e.newUser={isAdmin:!1,isActive:!0},function(){e.uploader=new o({removeAfterUpload:!0,formData:[],url:"/upload",queueLimit:1,onCompleteItem:function(t,o,r,n){200===r?(e.documents.push(o),e.newDoc={when:new Date}):e.uploadError=o}}),e.uploader.onBeforeUploadItem=function(t){t.formData.push(e.newDoc)},e.uploader.onCompleteAll=function(e){document.getElementById("uploader").value=null}}(),e.newDoc={when:new Date},e.filteredDocuments=function(){return e.documents?e.typeFilter?e.documents.filter(function(t){return t.type===e.typeFilter}):e.documents:null},e.types=s.types,e.selectUser=function(t){e.editUser=angular.copy(t)},e.selectDoc=function(t){e.editDoc=angular.copy(t),e.editDoc.when=new Date(e.editDoc.when)},e.updateDoc=function(){e.editDoc.name&&e.editDoc.when&&e.editDoc.type?(e.editDoc.saving=!0,s.updateDoc(e.editDoc).then(function(t){if(t&&!t.message){var o=e.documents.filter(function(t){return t._id===e.editDoc._id})[0];o&&(e.documents[e.documents.indexOf(o)]=t),e.editDoc=null}else e.editDoc.error=t,console.log("error",t)},function(t){e.editDoc.error=t,console.log("error",t)})):e.editDoc.error="Please fill out all required fields."},e.removeDoc=function(t){var o=e.documents.filter(function(e){return e._id===t._id})[0];o&&s.deleteDocument(t).then(function(t){200===t.status&&e.documents.splice(e.documents.indexOf(o),1)})},e.submit=function(){e.uploader.uploadAll()},e.updateUser=function(){e.editUser.saving=!0,t.updateUser(e.editUser).then(function(t){if(t&&!t.message){var o=e.users.filter(function(t){return t._id===e.editUser._id})[0];o&&(e.users[e.users.indexOf(o)]=t),e.editUser=null}else e.editUser.error=!0,console.log("Error",t),e.editUser.saving=!1},function(t){console.log("error",t),e.editUser.error=!0,e.editUser.saving=!1})},e.deleteUser=function(o){o.deleting=!0,t.deleteUser(o).then(function(t){if(200===t.status){var r=e.users.filter(function(e){return e._id===o._id})[0];r&&e.users.splice(e.users.indexOf(r),1)}else console.log("error",t),o.deleting=!1},function(e){console.log("error",e),o.deleting=!1})},e.register=function(){if(e.newUser.firstName&&e.newUser.lastName&&e.newUser.email&&e.newUser.pwd&&e.newUser.passwordConfirm){if(e.newUser.pwd!==e.newUser.passwordConfirm)return void(e.error="Passwords do not match.");t.register(e.newUser).then(function(t){t&&!t.message&&(e.users.push(t),e.newUser={isActive:!0,isAdmin:!1})})}else e.error="Please fill out all fields."}}angular.module("cwl.core").controller("adminCtrl",e),e.$inject=["$scope","authSrv","FileUploader","$location","docs","documentSrv"]}(),function(){"use strict";function e(e,t,o,r,n){t.user()||o.path("/login"),e.user=t.user(),e.types=n.types,e.selectedDocument=null,e.select=function(t){e.selectedDocument=angular.copy(t)},e.selected=function(t){return t&&e.selectedDocument&&t._id===e.selectedDocument._id},e.filterDocs={},e.documents=r,console.log(e.documents)}angular.module("cwl.core").controller("documentsCtrl",e),e.$inject=["$scope","authSrv","$location","docs","documentSrv"]}(),function(){"use strict";function e(e){e.user={isAuthenticated:function(){return!0}}}angular.module("cwl.core").controller("homeCtrl",e),e.$inject=["$scope"]}(),function(){"use strict";function e(e,t,o,r){t.user()&&o.path("/members/documents"),e.tab=r||1,e.showPass=!0,e.showConfirm=!0,e.showFirstName=!0,e.showLastName=!0,e.showEmail=!0,e.user={},e.forgot={},e.login=function(){t.login(e.user).then(function(t){t&&!t.message?o.path("/members/documents"):(e.error="Login Failed.",console.log(t))},function(t){e.error="Login Failed.",console.log(t)})},e.register=function(){if(e.error=null,e.user.pwd!==e.user.passwordConfirm)return void(e.error="Passwords do not match.");t.register(e.user).then(function(t){t&&!t.message?e.registrationSent=!0:(e.error="Registration Failed.",console.log(t))},function(t){console.log(t),e.error="Registration Failed."})},e.forgotPassword=function(){t.forgotPassword(e.forgot)}}angular.module("cwl.core").controller("loginCtrl",e),e.$inject=["$scope","authSrv","$location","tab"]}(),function(){"use strict";function e(e,t,o,r,n){e.login=function(e){o.open({backdrop:!0,templateUrl:"/app/views/loginModal.html",controller:"loginCtrl",animation:!0,size:"md",resolve:{tab:[function(){return e}]}})},e.state=n,e.user=t.user(),e.logout=function(){t.logout(),e.user=null},e.$on("auth",function(){e.user=t.user()}),e.openAside=function(){r.open({templateUrl:"/app/views/menuAside.html",placement:"right",size:"sm",backdrop:!0,controller:["$scope","$uibModalInstance",function(e,t){e.close=function(){t.dismiss()},e.go=function(e){t.close(e)}}]}).result.then(function(t){e.login(t)})}}angular.module("cwl.core").controller("navCtrl",e),e.$inject=["$scope","authSrv","$uibModal","$aside","$state"]}();
//# sourceMappingURL=app.min.js.map